# GitHub Setup Guide for VYB Backend

## ğŸš€ Quick Setup

### 1. Create GitHub Repository

1. Go to [GitHub.com](https://github.com) and sign in
2. Click "New repository" (green button)
3. Repository name: `vyb-backend`
4. Description: `VYB - Real-time prediction market discovery API`
5. Set to **Private** (recommended for production)
6. **Don't** initialize with README (we already have one)
7. Click "Create repository"

### 2. Connect Local Repository to GitHub

```bash
# Add GitHub remote (replace YOUR_USERNAME with your GitHub username)
git remote add origin https://github.com/YOUR_USERNAME/vyb-backend.git

# Push to GitHub
git push -u origin master
```

### 3. Verify Upload

Check your GitHub repository to ensure all files are uploaded:
- âœ… `package.json`
- âœ… `src/` directory with all modules
- âœ… `prisma/schema.prisma`
- âœ… `README.md`
- âœ… `docs/` directory
- âœ… `scripts/` directory

## ğŸ”§ Railway Integration

### Option 1: Connect via Railway Dashboard

1. Go to [Railway.app](https://railway.app)
2. Click "New Project"
3. Select "Deploy from GitHub repo"
4. Choose your `vyb-backend` repository
5. Railway will automatically deploy

### Option 2: Connect via CLI

```bash
# Link to existing Railway project
railway link

# Or create new project from GitHub
railway init --template https://github.com/YOUR_USERNAME/vyb-backend
```

## ğŸŒ Environment Variables

Set these in Railway dashboard after connecting:

### Required
```env
NODE_ENV=production
PORT=8080
DATABASE_URL=postgresql://...  # Auto-generated by Railway
REDIS_URL=redis://...          # Auto-generated by Railway
JWT_SECRET=your-super-secret-jwt-key-32-chars-min
MAGIC_LINK_SECRET=your-magic-link-secret-key
```

### Email Service
```env
EMAIL_FROM=noreply@vyb.app
RESEND_API_KEY=re_your-resend-api-key
```

### External APIs
```env
OPENAI_API_KEY=sk-your-openai-api-key
NEWSAPI_KEY=your-newsapi-key
X_BEARER_TOKEN=your-twitter-bearer-token
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
```

### CORS & Security
```env
CORS_ORIGIN=https://your-frontend-domain.com
RATE_LIMIT_IP_PER_MINUTE=120
RATE_LIMIT_USER_SWIPES_PER_MINUTE=30
```

### Ranking Algorithm
```env
RANKING_W1_LIQUIDITY=0.28
RANKING_W2_VOLUME=0.22
RANKING_W3_DRIFT=0.16
RANKING_W4_SOCIAL=0.24
RANKING_W5_TIME=0.10
```

### Feature Flags
```env
ENABLE_INSIGHTS=true
ENABLE_REALTIME=true
ENABLE_OTEL=false
```

## ğŸ“Š Add Services

In Railway dashboard:

1. **PostgreSQL Database**
   - Click "Add Service" â†’ "Database" â†’ "PostgreSQL"
   - Railway auto-generates `DATABASE_URL`

2. **Redis Cache**
   - Click "Add Service" â†’ "Database" â†’ "Redis"
   - Railway auto-generates `REDIS_URL`

## ğŸ—„ï¸ Database Setup

After deployment, run:

```bash
# Run migrations
railway run npm run db:migrate:deploy

# Seed with sample data
railway run npm run db:seed
```

## ğŸ”„ CI/CD Workflow

Railway will automatically:
- âœ… Deploy on every push to `master` branch
- âœ… Run build process
- âœ… Install dependencies
- âœ… Generate SDK
- âœ… Start the application

## ğŸ“± Frontend Integration

Once deployed, update your Lovable frontend:

```env
VITE_API_URL=https://your-app.railway.app
VITE_WS_URL=https://your-app.railway.app
```

## ğŸ§ª Testing Deployment

```bash
# Check health
curl https://your-app.railway.app/healthz

# Check API docs
open https://your-app.railway.app/docs
```

## ğŸ” Monitoring

- **Railway Dashboard**: Monitor deployments and logs
- **Health Check**: `https://your-app.railway.app/healthz`
- **API Docs**: `https://your-app.railway.app/docs`
- **Logs**: `railway logs`

## ğŸ› ï¸ Troubleshooting

### Common Issues

#### Build Failures
```bash
# Check build logs
railway logs --build

# Check if all dependencies are in package.json
npm install
```

#### Database Connection
```bash
# Verify DATABASE_URL is set
railway variables get DATABASE_URL

# Test connection
railway run npm run db:studio
```

#### Environment Variables
```bash
# List all variables
railway variables

# Set missing variables
railway variables set KEY=value
```

## ğŸ¯ Production Checklist

- [ ] GitHub repository created and connected
- [ ] Railway project connected to GitHub
- [ ] All environment variables set
- [ ] PostgreSQL and Redis services added
- [ ] Database migrations run
- [ ] Health check passing
- [ ] CORS origin configured
- [ ] Frontend updated with API URL

## ğŸ“ Support

- **GitHub**: Your repository issues
- **Railway**: https://railway.app/dashboard
- **VYB API**: `https://your-app.railway.app/docs`
